# Differentiation

Проект для разбора символьных выражений, хранения их в виде двоичных деревьев и генерации наглядных представлений (Graphviz, HTML-лог, LaTeX).

## Что делает система
- Читает выражения из текстового файла в формате s-expression: `(token left right)`, где `nil` обозначает отсутствующего ребенка.
- Строит дерево узлов `NODE_T`, которые бывают числовыми, операторными и именными (переменные).
- Поддерживает арифметику, степени, логарифмы, тригонометрические и гиперболические функции, перечисленные в `OPERATOR`.
- Ведет реестр уникальных переменных (`varlist::VarList`) и возвращает индексы при повторном использовании имен.
- Создает детализированные дампы: полный (`full_dump`) с внутренними указателями и компактный (`simple_dump`) только по значениям.
- Формирует LaTeX-строку (`latex_dump`), сохраняя корректные приоритеты и расстановку скобок.

## Структура проекта
- `src/differentiator.h` — публичные типы (`NODE_T`, `EQ_TREE_T`, перечисления) и прототипы функций работы с деревом.
- `src/parser.cpp` — парсер s-expression, точка входа `load_tree_from_file`, управление ошибками и привязка переменных.
- `src/tree.cpp` — создание/уничтожение узлов, утилиты определения типов токенов и операторов.
- `src/dump.cpp` — генерация DOT-файлов, HTML-записей лога и LaTeX-представления выражения.
- `src/var_list.*` — список переменных, обеспечивающий уникальность и быстрый поиск по именам.
- `main.cpp` — пример: читает `test_expression.txt`, вызывает дампы, печатает LaTeX и корректно освобождает ресурсы.

## Требуемая раскладка каталогов
```
./
├── differentiation/          (этот проект)
├── io_utils/                 ([Neburalis/io_utils](https://github.com/Neburalis/io_utils))
└── string_and_thong/         ([Neburalis/string_and_thong](https://github.com/Neburalis/string_and_thong))
```
В корне `differentiation/` лежит конфиг `.gppp.cfg`, перечисляющий исходники и заголовки для сборки.

## Сборка
Используйте мою утилиту [`g+++`](https://github.com/Neburalis/gppp) — она читает `.gppp.cfg` и автоматически применяет оптимальные флаги компилятора.
```bash
cd /root/prog/differentiation
g+++        # создаст исполняемый файл a.out
```
Результатом будет `a.out` в текущем каталоге.

## Запуск
```bash
./a.out
```
В результате в каталоге `logs/` появятся HTML и SVG-дампы дерева, а LaTeX-представление будет выведено в stdout.

